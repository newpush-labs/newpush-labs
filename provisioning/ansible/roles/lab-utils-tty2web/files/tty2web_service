[Unit]
Description=tty2web Service
After=network.target docker.service
Wants=docker.service
Requires=docker.service

[Service]
Type=simple
ExecStartPre=/bin/bash -c 'until docker network ls | grep -q bridge; do echo "Waiting for Docker bridge network..."; sleep 2; done'
ExecStartPre=/bin/bash -c 'until ip route | grep -q "172.17.0.0/16"; do echo "Waiting for Docker bridge network route..."; sleep 2; done'
ExecStart=/usr/local/bin/tty2web -p 9942 --url tty -a 172.17.0.1 -w bash
Restart=always
RestartSec=5
User=root
Group=root
TimeoutStartSec=60

[Install]
WantedBy=multi-user.target
